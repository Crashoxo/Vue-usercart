{"remainingRequest":"C:\\Users\\user\\Desktop\\demo\\Vue-cart\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\user\\Desktop\\demo\\Vue-cart\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\user\\Desktop\\demo\\Vue-cart\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\user\\Desktop\\demo\\Vue-cart\\src\\views\\UserCheckout.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\user\\Desktop\\demo\\Vue-cart\\src\\views\\UserCheckout.vue","mtime":1637281190456},{"path":"C:\\Users\\user\\Desktop\\demo\\Vue-cart\\babel.config.js","mtime":1636350343535},{"path":"C:\\Users\\user\\Desktop\\demo\\Vue-cart\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\demo\\Vue-cart\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\user\\Desktop\\demo\\Vue-cart\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\demo\\Vue-cart\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBvcmRlcjogewogICAgICAgIHVzZXI6IHt9CiAgICAgIH0sCiAgICAgIG9yZGVySWQ6ICIiLAogICAgICBpc0xvYWRpbmc6IGZhbHNlCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0T3JkZXI6IGZ1bmN0aW9uIGdldE9yZGVyKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy8gIEFQSSDlj5blvpfmn5DkuIDnrYboqILllq4KICAgICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9oZXhzY2hvb2wvdnVlMy1jb3Vyc2UtYXBpLXdpa2kvd2lraS8lRTUlQUUlQTIlRTYlODglQjYlRTglQjMlQkMlRTclODklQTktJTVCJUU1JTg1JThEJUU5JUE5JTk3JUU4JUFEJTg5JTVEIyVFNSU4RiU5NiVFNSVCRSU5NyVFNiU5RiU5MCVFNCVCOCU4MCVFNyVBRCU4NiVFOCVBOCU4MiVFNSU5NiVBRQogICAgICB2YXIgdXJsID0gIiIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfQVBJLCAiYXBpLyIpLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX1BBVEgsICIvb3JkZXIvIikuY29uY2F0KHRoaXMub3JkZXJJZCk7CiAgICAgIHRoaXMuJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgIF90aGlzLm9yZGVyID0gcmVzLmRhdGEub3JkZXI7CiAgICAgICAgICBjb25zb2xlLmxvZyhfdGhpcy5vcmRlcik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBwYXlPcmRlcjogZnVuY3Rpb24gcGF5T3JkZXIoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgLy8gIEFQSSDntZDluLPku5jmrL4KICAgICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9oZXhzY2hvb2wvdnVlMy1jb3Vyc2UtYXBpLXdpa2kvd2lraS8lRTUlQUUlQTIlRTYlODglQjYlRTglQjMlQkMlRTclODklQTktJTVCJUU1JTg1JThEJUU5JUE5JTk3JUU4JUFEJTg5JTVEIyVFNyVCNSU5MCVFNSVCOCVCMyVFNCVCQiU5OCVFNiVBQyVCRQogICAgICB2YXIgdXJsID0gIiIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfQVBJLCAiYXBpLyIpLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX1BBVEgsICIvcGF5LyIpLmNvbmNhdCh0aGlzLm9yZGVySWQpOwogICAgICB0aGlzLiRodHRwLnBvc3QodXJsKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwoKICAgICAgICBpZiAocmVzLmRhdGEuc3VjY2VzcykgewogICAgICAgICAgX3RoaXMyLmdldE9yZGVyKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICAvLyAkcm91dGUucGFyYW1zIOaKk+e2suWdgOWIl+eUqAogICAgdGhpcy5vcmRlcklkID0gdGhpcy4kcm91dGUucGFyYW1zLm9yZGVySWQ7CiAgICBjb25zb2xlLmxvZyh0aGlzLm9yZGVySWQpOyAvLyDliLfmlrDpoIHpnaIKCiAgICB0aGlzLmdldE9yZGVyKCk7CiAgfQp9Ow=="},{"version":3,"sources":["C:\\Users\\user\\Desktop\\demo\\Vue-cart\\src\\views\\UserCheckout.vue"],"names":[],"mappings":";AA8DA,eAAe;AACb,EAAA,IADa,kBACN;AACL,WAAO;AACL,MAAA,KAAK,EAAE;AACL,QAAA,IAAI,EAAE;AADD,OADF;AAIL,MAAA,OAAO,EAAE,EAJJ;AAKL,MAAA,SAAS,EAAE;AALN,KAAP;AAOD,GATY;AAUb,EAAA,OAAO,EAAE;AACP,IAAA,QADO,sBACI;AAAA;;AACT;AACA;AACA,UAAM,GAAE,aAAO,OAAO,CAAC,GAAR,CAAY,WAAnB,iBAAqC,OAAO,CAAC,GAAR,CAAY,YAAjD,oBAAuE,KAAK,OAA5E,CAAR;AACA,WAAK,KAAL,CAAW,GAAX,CAAe,GAAf,EAAoB,IAApB,CAAyB,UAAC,GAAD,EAAS;AAChC,YAAI,GAAG,CAAC,IAAJ,CAAS,OAAb,EAAsB;AACpB,UAAA,KAAI,CAAC,KAAL,GAAa,GAAG,CAAC,IAAJ,CAAS,KAAtB;AACA,UAAA,OAAO,CAAC,GAAR,CAAY,KAAI,CAAC,KAAjB;AACF;AACD,OALD;AAMD,KAXM;AAYP,IAAA,QAZO,sBAYI;AAAA;;AACT;AACA;AACA,UAAM,GAAE,aAAO,OAAO,CAAC,GAAR,CAAY,WAAnB,iBAAqC,OAAO,CAAC,GAAR,CAAY,YAAjD,kBAAqE,KAAK,OAA1E,CAAR;AACA,WAAK,KAAL,CAAW,IAAX,CAAgB,GAAhB,EAAqB,IAArB,CAA0B,UAAC,GAAD,EAAS;AACjC,QAAA,OAAO,CAAC,GAAR,CAAY,GAAZ;;AACA,YAAI,GAAG,CAAC,IAAJ,CAAS,OAAb,EAAsB;AACpB,UAAA,MAAI,CAAC,QAAL;AACF;AACD,OALD;AAMD;AAtBM,GAVI;AAkCb,EAAA,OAlCa,qBAkCH;AACR;AACA,SAAK,OAAL,GAAe,KAAK,MAAL,CAAY,MAAZ,CAAmB,OAAlC;AACA,IAAA,OAAO,CAAC,GAAR,CAAY,KAAK,OAAjB,EAHQ,CAIR;;AACA,SAAK,QAAL;AACD;AAxCY,CAAf","sourcesContent":["<template>\r\n  <Loading :active=\"isLoading\"></Loading>\r\n  <div class=\"my-5 row justify-content-center\">\r\n    <form class=\"col-md-6\" @submit.prevent=\"payOrder\">\r\n      <table class=\"table align-middle\">\r\n        <thead>\r\n          <th>品名</th>\r\n          <th>數量</th>\r\n          <th>單價</th>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"item in order.products\" :key=\"item.id\">\r\n            <td>{{ item.product.title }}</td>\r\n            <td>{{ item.qty }}/{{ item.product.unit }}</td>\r\n            <!-- $filters 全域方法 變更$格式 -->\r\n            <td class=\"text-end\">{{ $filters.currency(item.final_total) }}</td>\r\n          </tr>\r\n        </tbody>\r\n        <tfoot>\r\n          <tr>\r\n            <td colspan=\"2\" class=\"text-end\">總計</td>\r\n            <!-- $filters 全域方法 變更$格式 -->\r\n            <td class=\"text-end\">{{ $filters.currency(order.total) }}</td>\r\n          </tr>\r\n        </tfoot>\r\n      </table>\r\n\r\n      <table class=\"table\">\r\n        <tbody>\r\n          <tr>\r\n            <th width=\"100\">Email</th>\r\n            <td>{{ order.user.email }}</td>\r\n          </tr>\r\n          <tr>\r\n            <th>姓名</th>\r\n            <td>{{ order.user.name }}</td>\r\n          </tr>\r\n          <tr>\r\n            <th>收件人電話</th>\r\n            <td>{{ order.user.tel }}</td>\r\n          </tr>\r\n          <tr>\r\n            <th>收件人地址</th>\r\n            <td>{{ order.user.address }}</td>\r\n          </tr>\r\n          <tr>\r\n            <th>付款狀態</th>\r\n            <td>\r\n              <span v-if=\"!order.is_paid\">尚未付款</span>\r\n              <span v-else class=\"text-success\">付款完成</span>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n      <div class=\"text-end\" v-if=\"order.is_paid === false\">\r\n        <button class=\"btn btn-danger\">確認付款去</button>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      order: {\r\n        user: {},\r\n      },\r\n      orderId: \"\",\r\n      isLoading: false,\r\n    };\r\n  },\r\n  methods: {\r\n    getOrder() {\r\n      //  API 取得某一筆訂單\r\n      //  https://github.com/hexschool/vue3-course-api-wiki/wiki/%E5%AE%A2%E6%88%B6%E8%B3%BC%E7%89%A9-%5B%E5%85%8D%E9%A9%97%E8%AD%89%5D#%E5%8F%96%E5%BE%97%E6%9F%90%E4%B8%80%E7%AD%86%E8%A8%82%E5%96%AE\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order/${this.orderId}`;\r\n      this.$http.get(url).then((res) => {\r\n        if (res.data.success) {\r\n          this.order = res.data.order;\r\n          console.log(this.order);\r\n        }\r\n      });\r\n    },\r\n    payOrder() {\r\n      //  API 結帳付款\r\n      //  https://github.com/hexschool/vue3-course-api-wiki/wiki/%E5%AE%A2%E6%88%B6%E8%B3%BC%E7%89%A9-%5B%E5%85%8D%E9%A9%97%E8%AD%89%5D#%E7%B5%90%E5%B8%B3%E4%BB%98%E6%AC%BE\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/pay/${this.orderId}`;\r\n      this.$http.post(url).then((res) => {\r\n        console.log(res);\r\n        if (res.data.success) {\r\n          this.getOrder();\r\n        }\r\n      });\r\n    },\r\n  },\r\n  created() {\r\n    // $route.params 抓網址列用\r\n    this.orderId = this.$route.params.orderId;\r\n    console.log(this.orderId);\r\n    // 刷新頁面\r\n    this.getOrder();\r\n  },\r\n};\r\n</script>\r\n"],"sourceRoot":""}]}