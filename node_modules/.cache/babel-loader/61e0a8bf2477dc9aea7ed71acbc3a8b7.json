{"remainingRequest":"C:\\Users\\user\\Desktop\\demo\\Vue-usercart\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\user\\Desktop\\demo\\Vue-usercart\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\user\\Desktop\\demo\\Vue-usercart\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\user\\Desktop\\demo\\Vue-usercart\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\user\\Desktop\\demo\\Vue-usercart\\src\\views\\UserCart.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\user\\Desktop\\demo\\Vue-usercart\\src\\views\\UserCart.vue","mtime":1637281360997},{"path":"C:\\Users\\user\\Desktop\\demo\\Vue-usercart\\babel.config.js","mtime":1636350343535},{"path":"C:\\Users\\user\\Desktop\\demo\\Vue-usercart\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\demo\\Vue-usercart\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\demo\\Vue-usercart\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\user\\Desktop\\demo\\Vue-usercart\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\demo\\Vue-usercart\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzdGF0dXM6IHsKICAgICAgICAvLyDlsI/lsI/oroDlj5bmlYjmnpwgKyDos7znianou4rmjInpiJXmmqvmmYLnhKHms5Xln7fooYwg5YCJ5bqrCiAgICAgICAgbG9hZGluZ0l0ZW06ICIiIC8v5bCN5oeJ5ZOB6aCFaWQKCiAgICAgIH0sCiAgICAgIGNhcnQ6IHt9LAogICAgICBjb3Vwb25fY29kZTogIiIsCiAgICAgIC8v5YSq5oOg5Y23CiAgICAgIC8vIOihqOWWruizh+aWmQogICAgICBmb3JtOiB7CiAgICAgICAgdXNlcjogewogICAgICAgICAgbmFtZTogIiIsCiAgICAgICAgICBlbWFpbDogIiIsCiAgICAgICAgICB0ZWw6ICIiLAogICAgICAgICAgYWRkcmVzczogIiIKICAgICAgICB9LAogICAgICAgIG1lc3NhZ2U6ICIiCiAgICAgIH0sCiAgICAgIC8vIOS+m+i9ieWdgOS9v+eUqAogICAgICBvcmRlcklkOiAiIgogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOaKk+izvOeJqei7iuWFp+WuuQogICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2hleHNjaG9vbC92dWUzLWNvdXJzZS1hcGktd2lraS93aWtpLyVFNSVBRSVBMiVFNiU4OCVCNiVFOCVCMyVCQyVFNyU4OSVBOS0lNUIlRTUlODUlOEQlRTklQTklOTclRTglQUQlODklNUQjJUU1JThGJTk2JUU1JUJFJTk3JUU4JUIzJUJDJUU3JTg5JUE5JUU4JUJCJThBJUU1JTg4JTk3JUU4JUExJUE4CiAgICBnZXRDYXJ0OiBmdW5jdGlvbiBnZXRDYXJ0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHVybCA9ICIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX0FQSSwgImFwaS8iKS5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9QQVRILCAiL2NhcnQiKTsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlOwogICAgICB0aGlzLiRodHRwLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgY29uc29sZS5sb2coIuaKk+izvOeJqei7iuWFp+WuuSIsIHJlc3BvbnNlKTsKICAgICAgICBfdGhpcy5jYXJ0ID0gcmVzcG9uc2UuZGF0YS5kYXRhOwogICAgICAgIF90aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICB1cGRhdGVDYXJ0OiBmdW5jdGlvbiB1cGRhdGVDYXJ0KGl0ZW0pIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAvLyBBUEkg5pu05paw6LO854mp6LuKCiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9oZXhzY2hvb2wvdnVlMy1jb3Vyc2UtYXBpLXdpa2kvd2lraS8lRTUlQUUlQTIlRTYlODglQjYlRTglQjMlQkMlRTclODklQTktJTVCJUU1JTg1JThEJUU5JUE5JTk3JUU4JUFEJTg5JTVEIyVFNiU5QiVCNCVFNiU5NiVCMCVFOCVCMyVCQyVFNyU4OSVBOSVFOCVCQiU4QQogICAgICAvLyBwcm9kdWN0X2lkKFN0cmluZynjgIFxdHkoTnVtYmVyKSDngrrlv4XloavmrITkvY0g5omN6IO96KiI566XCiAgICAgIHZhciB1cmwgPSAiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9BUEksICJhcGkvIikuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfUEFUSCwgIi9jYXJ0LyIpLmNvbmNhdChpdGVtLmlkKTsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlOwogICAgICB0aGlzLnN0YXR1cy5sb2FkaW5nSXRlbSA9IGl0ZW0uaWQ7IC8vIOaMieS4i+aMiemIlemAgWlk77yM6LOm5YC857Wm5YCJ5bqrCgogICAgICB2YXIgY2FydCA9IHsKICAgICAgICBwcm9kdWN0X2lkOiBpdGVtLnByb2R1Y3RfaWQsCiAgICAgICAgcXR5OiBpdGVtLnF0eQogICAgICB9OwogICAgICB0aGlzLiRodHRwLnB1dCh1cmwsIHsKICAgICAgICBkYXRhOiBjYXJ0CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMi5zdGF0dXMubG9hZGluZ0l0ZW0gPSAiIjsgLy8g5oyJ5LiL5oyJ6YiV6YCBaWTvvIzos6blgLzntablgInluqsKCiAgICAgICAgY29uc29sZS5sb2coInJlcyIsIHJlcyk7CgogICAgICAgIF90aGlzMi5nZXRDYXJ0KCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOenu+mZpOizvOeJqei7iuWVhuWTgQogICAgcmVtb3ZlQ2FydEl0ZW06IGZ1bmN0aW9uIHJlbW92ZUNhcnRJdGVtKGlkKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy5zdGF0dXMubG9hZGluZ0l0ZW0gPSBpZDsKICAgICAgdmFyIHVybCA9ICIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX0FQSSwgImFwaS8iKS5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9QQVRILCAiL2NhcnQvIikuY29uY2F0KGlkKTsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlOwogICAgICB0aGlzLiRodHRwLmRlbGV0ZSh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMzLiRodHRwTWVzc2FnZVN0YXRlKHJlc3BvbnNlLCAi56e76Zmk6LO854mp6LuK5ZOB6aCFIik7IC8v5ZCQ5Y+46Lez56qXCgoKICAgICAgICBfdGhpczMuc3RhdHVzLmxvYWRpbmdJdGVtID0gIiI7CgogICAgICAgIF90aGlzMy5nZXRDYXJ0KCk7CgogICAgICAgIF90aGlzMy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5L2/55So5YSq5oOg5Y23CiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vaGV4c2Nob29sL3Z1ZTMtY291cnNlLWFwaS13aWtpL3dpa2kvJUU1JUFFJUEyJUU2JTg4JUI2JUU4JUIzJUJDJUU3JTg5JUE5LSU1QiVFNSU4NSU4RCVFOSVBOSU5NyVFOCVBRCU4OSU1RCMlRTUlQTUlOTclRTclOTQlQTglRTUlODQlQUElRTYlODMlQTAlRTUlODglQjgKICAgIGFkZENvdXBvbkNvZGU6IGZ1bmN0aW9uIGFkZENvdXBvbkNvZGUoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdmFyIHVybCA9ICIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX0FQSSwgImFwaS8iKS5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9QQVRILCAiL2NvdXBvbiIpOwogICAgICB2YXIgY291cG9uID0gewogICAgICAgIGNvZGU6IHRoaXMuY291cG9uX2NvZGUKICAgICAgfTsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlOwogICAgICB0aGlzLiRodHRwLnBvc3QodXJsLCB7CiAgICAgICAgZGF0YTogY291cG9uCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXM0LiRodHRwTWVzc2FnZVN0YXRlKHJlc3BvbnNlLCAi5Yqg5YWl5YSq5oOg5Yi4Iik7IC8v5ZCQ5Y+46Lez56qXCgoKICAgICAgICBfdGhpczQuZ2V0Q2FydCgpOwoKICAgICAgICBfdGhpczQuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOW7uueri+ioguWWrgogICAgY3JlYXRlT3JkZXI6IGZ1bmN0aW9uIGNyZWF0ZU9yZGVyKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsgLy8gQVBJIOe1kOW4s+mggemdogogICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vaGV4c2Nob29sL3Z1ZTMtY291cnNlLWFwaS13aWtpL3dpa2kvJUU1JUFFJUEyJUU2JTg4JUI2JUU4JUIzJUJDJUU3JTg5JUE5LSU1QiVFNSU4NSU4RCVFOSVBOSU5NyVFOCVBRCU4OSU1RCMlRTclQjUlOTAlRTUlQjglQjMlRTklQTAlODElRTklOUQlQTIKCiAgICAgIHZhciB1cmwgPSAiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9BUEksICJhcGkvIikuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfUEFUSCwgIi9vcmRlciIpOwogICAgICB2YXIgb3JkZXIgPSB0aGlzLmZvcm07CiAgICAgIHRoaXMuJGh0dHAucG9zdCh1cmwsIHsKICAgICAgICBkYXRhOiBvcmRlcgogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOyAvLyBvcmRlcklkCgogICAgICAgIF90aGlzNS5pc0xvYWRpbmcgPSBmYWxzZTsgLy8g5b6M56uv5pyJ5pa55rOV5pyD55u05o6l5riF56m66LO854mp6LuKCgogICAgICAgIF90aGlzNS5nZXRDYXJ0KCk7IC8vIOaKk0lE6YCB6L2J6Lez57ay5Z2A5YiXCgoKICAgICAgICBfdGhpczUub3JkZXJJZCA9IHJlcy5kYXRhLm9yZGVySWQ7CgogICAgICAgIF90aGlzNS4kcm91dGVyLnB1c2goImNoZWNrb3V0LyIuY29uY2F0KF90aGlzNS5vcmRlcklkKSk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgLy8g55Sf5ZG96YCx5pyf77yM57ay6aCB6ZaL5aeL5bCx6LeRCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0Q2FydCgpOwogIH0KfTs="},{"version":3,"sources":["C:\\Users\\user\\Desktop\\demo\\Vue-usercart\\src\\views\\UserCart.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <!-- 購物車列表 -->\r\n    <div class=\"col-md-5\">\r\n      <div class=\"sticky-top\">\r\n        <table class=\"table align-middle\">\r\n          <thead>\r\n            <tr>\r\n              <th></th>\r\n              <th>品名</th>\r\n              <th style=\"width: 110px\">數量</th>\r\n              <th>單價</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <template v-if=\"cart.carts\">\r\n              <tr v-for=\"item in cart.carts\" :key=\"item.id\">\r\n                <td>\r\n                  <button\r\n                    type=\"button\"\r\n                    class=\"btn btn-outline-danger btn-sm\"\r\n                    :disabled=\"status.loadingItem === item.id\"\r\n                    @click=\"removeCartItem(item.id)\"\r\n                  >\r\n                    <!-- 使用material-icons main.js已匯入 -->\r\n                    <span class=\"material-icons-outlined\"> clear </span>\r\n                  </button>\r\n                </td>\r\n                <td>\r\n                  {{ item.product.title }}\r\n                  <div class=\"text-success\" v-if=\"item.coupon\">\r\n                    已套用優惠券\r\n                  </div>\r\n                </td>\r\n                <td>\r\n                  <div class=\"input-group input-group-sm mx-4\">\r\n                    <!-- 預防增減數量太快 讀取中禁止使用(disabled) -->\r\n                    <!-- :disabled=\"item.id === status.loadingItem\" -->\r\n                    <!-- v-on:change改變 觸發 -->\r\n                    <input\r\n                      v-model.number=\"item.qty\"\r\n                      min=\"1\"\r\n                      v-on:change=\"updateCart(item)\"\r\n                      :disabled=\"item.id === status.loadingItem\"\r\n                      type=\"number\"\r\n                      class=\"form-control\"\r\n                    />\r\n                    <div class=\"input-group-text\">\r\n                      / {{ item.product.unit }}\r\n                    </div>\r\n                  </div>\r\n                </td>\r\n                <td class=\"text-end\">\r\n                  <small\r\n                    v-if=\"cart.final_total !== cart.total\"\r\n                    class=\"text-success\"\r\n                    >折扣價：</small\r\n                  >\r\n                  <!-- $filters 全域方法 變更$格式 -->\r\n                  {{ $filters.currency(item.final_total) }}\r\n                </td>\r\n              </tr>\r\n            </template>\r\n          </tbody>\r\n          <tfoot>\r\n            <tr>\r\n              <td colspan=\"3\" class=\"text-end\">總計</td>\r\n              <td class=\"text-end\">{{ $filters.currency(cart.total) }}</td>\r\n            </tr>\r\n            <!-- 如果不相同 顯示此tr -->\r\n            <tr v-if=\"cart.final_total !== cart.total\">\r\n              <td colspan=\"3\" class=\"text-end text-success\">折扣價</td>\r\n              <td class=\"text-end text-success\">\r\n                {{ $filters.currency(cart.final_total) }}\r\n              </td>\r\n            </tr>\r\n          </tfoot>\r\n        </table>\r\n        <div class=\"input-group mb-3 input-group-sm\">\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            v-model=\"coupon_code\"\r\n            placeholder=\"請輸入優惠碼\"\r\n          />\r\n          <div class=\"input-group-append\">\r\n            <button\r\n              v-on:click=\"addCouponCode\"\r\n              class=\"btn btn-outline-secondary\"\r\n              type=\"button\"\r\n            >\r\n              套用優惠碼\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- 結帳頁面 -->\r\n  <!-- 使用vee-validate套件 對應標籤(main.js)-->\r\n  <!-- v-slot 插入文字or外部標籤 vee-validate套件用法 引入zh_TW.json-->\r\n  <!-- 邏輯：利用v-slot抓全部的zh_TW.json再靠rules=\"email|required\"判斷，v-slot顯示文字-->\r\n  <div class=\"my-5 row justify-content-center\">\r\n    <Form class=\"col-md-6\" v-slot=\"{ errors }\" @submit=\"createOrder\">\r\n      <div class=\"mb-3\">\r\n        <label for=\"email\" class=\"form-label\">Email</label>\r\n        <Field\r\n          id=\"email\"\r\n          name=\"email\"\r\n          type=\"email\"\r\n          class=\"form-control\"\r\n          :class=\"{ 'is-invalid': errors['email'] }\"\r\n          placeholder=\"請輸入 Email\"\r\n          rules=\"email|required\"\r\n          v-model=\"form.user.email\"\r\n        ></Field>\r\n        <ErrorMessage name=\"email\" class=\"invalid-feedback\"></ErrorMessage>\r\n      </div>\r\n\r\n      <div class=\"mb-3\">\r\n        <label for=\"name\" class=\"form-label\">收件人姓名</label>\r\n        <Field\r\n          id=\"name\"\r\n          name=\"姓名\"\r\n          type=\"text\"\r\n          class=\"form-control\"\r\n          :class=\"{ 'is-invalid': errors['姓名'] }\"\r\n          placeholder=\"請輸入姓名\"\r\n          rules=\"required\"\r\n          v-model=\"form.user.name\"\r\n        ></Field>\r\n        <ErrorMessage name=\"姓名\" class=\"invalid-feedback\"></ErrorMessage>\r\n      </div>\r\n\r\n      <div class=\"mb-3\">\r\n        <label for=\"tel\" class=\"form-label\">收件人電話</label>\r\n        <Field\r\n          id=\"tel\"\r\n          name=\"電話\"\r\n          type=\"tel\"\r\n          class=\"form-control\"\r\n          :class=\"{ 'is-invalid': errors['電話'] }\"\r\n          placeholder=\"請輸入電話\"\r\n          rules=\"required\"\r\n          v-model=\"form.user.tel\"\r\n        ></Field>\r\n        <ErrorMessage name=\"電話\" class=\"invalid-feedback\"></ErrorMessage>\r\n      </div>\r\n\r\n      <div class=\"mb-3\">\r\n        <label for=\"address\" class=\"form-label\">收件人地址</label>\r\n        <Field\r\n          id=\"address\"\r\n          name=\"地址\"\r\n          type=\"text\"\r\n          class=\"form-control\"\r\n          :class=\"{ 'is-invalid': errors['地址'] }\"\r\n          placeholder=\"請輸入地址\"\r\n          rules=\"required\"\r\n          v-model=\"form.user.address\"\r\n        ></Field>\r\n        <ErrorMessage name=\"地址\" class=\"invalid-feedback\"></ErrorMessage>\r\n      </div>\r\n\r\n      <div class=\"mb-3\">\r\n        <label for=\"message\" class=\"form-label\">留言</label>\r\n        <textarea\r\n          name=\"\"\r\n          id=\"message\"\r\n          class=\"form-control\"\r\n          cols=\"30\"\r\n          rows=\"10\"\r\n          v-model=\"form.message\"\r\n        ></textarea>\r\n      </div>\r\n      <div class=\"text-end\">\r\n        <button class=\"btn btn-danger\">送出訂單</button>\r\n      </div>\r\n    </Form>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      status: {\r\n        // 小小讀取效果 + 購物車按鈕暫時無法執行 倉庫\r\n        loadingItem: \"\", //對應品項id\r\n      },\r\n      cart: {},\r\n      coupon_code: \"\", //優惠卷\r\n      // 表單資料\r\n      form: {\r\n        user: {\r\n          name: \"\",\r\n          email: \"\",\r\n          tel: \"\",\r\n          address: \"\",\r\n        },\r\n        message: \"\",\r\n      },\r\n      // 供轉址使用\r\n      orderId: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    // 抓購物車內容\r\n    // https://github.com/hexschool/vue3-course-api-wiki/wiki/%E5%AE%A2%E6%88%B6%E8%B3%BC%E7%89%A9-%5B%E5%85%8D%E9%A9%97%E8%AD%89%5D#%E5%8F%96%E5%BE%97%E8%B3%BC%E7%89%A9%E8%BB%8A%E5%88%97%E8%A1%A8\r\n    getCart() {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\r\n      this.isLoading = true;\r\n      this.$http.get(url).then((response) => {\r\n        console.log(\"抓購物車內容\", response);\r\n        this.cart = response.data.data;\r\n        this.isLoading = false;\r\n      });\r\n    },\r\n    updateCart(item) {\r\n      // API 更新購物車\r\n      // https://github.com/hexschool/vue3-course-api-wiki/wiki/%E5%AE%A2%E6%88%B6%E8%B3%BC%E7%89%A9-%5B%E5%85%8D%E9%A9%97%E8%AD%89%5D#%E6%9B%B4%E6%96%B0%E8%B3%BC%E7%89%A9%E8%BB%8A\r\n      // product_id(String)、qty(Number) 為必填欄位 才能計算\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\r\n      this.isLoading = true;\r\n      this.status.loadingItem = item.id; // 按下按鈕送id，賦值給倉庫\r\n      const cart = {\r\n        product_id: item.product_id,\r\n        qty: item.qty,\r\n      };\r\n      this.$http.put(url, { data: cart }).then((res) => {\r\n        this.status.loadingItem = \"\"; // 按下按鈕送id，賦值給倉庫\r\n        console.log(\"res\", res);\r\n        this.getCart();\r\n      });\r\n    },\r\n    // 移除購物車商品\r\n    removeCartItem(id) {\r\n      this.status.loadingItem = id;\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`;\r\n      this.isLoading = true;\r\n      this.$http.delete(url).then((response) => {\r\n        this.$httpMessageState(response, \"移除購物車品項\"); //吐司跳窗\r\n        this.status.loadingItem = \"\";\r\n        this.getCart();\r\n        this.isLoading = false;\r\n      });\r\n    },\r\n    // 使用優惠卷\r\n    // https://github.com/hexschool/vue3-course-api-wiki/wiki/%E5%AE%A2%E6%88%B6%E8%B3%BC%E7%89%A9-%5B%E5%85%8D%E9%A9%97%E8%AD%89%5D#%E5%A5%97%E7%94%A8%E5%84%AA%E6%83%A0%E5%88%B8\r\n    addCouponCode() {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`;\r\n      const coupon = {\r\n        code: this.coupon_code,\r\n      };\r\n      this.isLoading = true;\r\n      this.$http.post(url, { data: coupon }).then((response) => {\r\n        this.$httpMessageState(response, \"加入優惠券\"); //吐司跳窗\r\n        this.getCart();\r\n        this.isLoading = false;\r\n      });\r\n    },\r\n    // 建立訂單\r\n    createOrder() {\r\n      this.isLoading = true;\r\n      // API 結帳頁面\r\n      // https://github.com/hexschool/vue3-course-api-wiki/wiki/%E5%AE%A2%E6%88%B6%E8%B3%BC%E7%89%A9-%5B%E5%85%8D%E9%A9%97%E8%AD%89%5D#%E7%B5%90%E5%B8%B3%E9%A0%81%E9%9D%A2\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order`;\r\n      const order = this.form;\r\n      this.$http.post(url, { data: order }).then((res) => {\r\n        console.log(res); // orderId\r\n        this.isLoading = false;\r\n        // 後端有方法會直接清空購物車\r\n        this.getCart();\r\n\r\n        // 抓ID送轉跳網址列\r\n        this.orderId = res.data.orderId;\r\n        this.$router.push(`checkout/${this.orderId}`);\r\n      });\r\n    },\r\n  },\r\n  // 生命週期，網頁開始就跑\r\n  created() {\r\n    this.getCart();\r\n  },\r\n};\r\n</script>\r\n"],"sourceRoot":""}]}