{"remainingRequest":"C:\\Users\\user\\Desktop\\demo\\new-project\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\user\\Desktop\\demo\\new-project\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\user\\Desktop\\demo\\new-project\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\user\\Desktop\\demo\\new-project\\src\\views\\UserProduct.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\user\\Desktop\\demo\\new-project\\src\\views\\UserProduct.vue","mtime":1637043119831},{"path":"C:\\Users\\user\\Desktop\\demo\\new-project\\babel.config.js","mtime":1636350343535},{"path":"C:\\Users\\user\\Desktop\\demo\\new-project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\demo\\new-project\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\user\\Desktop\\demo\\new-project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\demo\\new-project\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwcm9kdWN0OiB7fSwKICAgICAgaWQ6ICIiLAogICAgICBxdHk6IDEsCiAgICAgIHN0YXR1czogewogICAgICAgIC8vIOWwj+Wwj+iugOWPluaViOaenCArIOizvOeJqei7iuaMiemIleaaq+aZgueEoeazleWft+ihjCDlgInluqsKICAgICAgICBsb2FkaW5nSXRlbTogIiIgLy/lsI3mh4nlk4HpoIVpZAoKICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFByb2R1Y3Q6IGZ1bmN0aW9uIGdldFByb2R1Y3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgYXBpID0gIiIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfQVBJLCAiYXBpLyIpLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX1BBVEgsICIvcHJvZHVjdC8iKS5jb25jYXQodGhpcy5pZCk7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgdGhpcy4kaHR0cC5nZXQoYXBpKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwogICAgICAgIF90aGlzLmlzTG9hZGluZyA9IGZhbHNlOwoKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICBfdGhpcy5wcm9kdWN0ID0gcmVzcG9uc2UuZGF0YS5wcm9kdWN0OwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgYWRkVG9DYXJ0OiBmdW5jdGlvbiBhZGRUb0NhcnQoaWQsIHF0eSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKHF0eSk7CiAgICAgIHRoaXMuc3RhdHVzLmxvYWRpbmdJdGVtID0gaWQ7IC8vIOaMieS4i+aMiemIlemAgWlk77yM6LOm5YC857Wm5YCJ5bqrCgogICAgICB2YXIgdXJsID0gIiIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfQVBJLCAiYXBpLyIpLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX1BBVEgsICIvY2FydCIpOwogICAgICB2YXIgY2FydCA9IHsKICAgICAgICBwcm9kdWN0X2lkOiBpZCwKICAgICAgICBxdHk6IHF0eQogICAgICB9OwogICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7CiAgICAgIHRoaXMuJGh0dHAucG9zdCh1cmwsIHsKICAgICAgICBkYXRhOiBjYXJ0CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMyLnN0YXR1cy5sb2FkaW5nSXRlbSA9ICIiOyAvL+izh+aWmeW6q+abtOaWsOaIkOWKn+W+jO+8jOepugoKICAgICAgICBfdGhpczIuaXNMb2FkaW5nID0gZmFsc2U7CgogICAgICAgIF90aGlzMi4kaHR0cE1lc3NhZ2VTdGF0ZShyZXNwb25zZSwgIuWKoOWFpeizvOeJqei7iiIpOwoKICAgICAgICBfdGhpczIuJHJvdXRlci5wdXNoKCIvdXNlci9jYXJ0Iik7CiAgICAgIH0pOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMucHJvZHVjdElkOwogICAgdGhpcy5nZXRQcm9kdWN0KCk7CiAgfQp9Ow=="},{"version":3,"sources":["C:\\Users\\user\\Desktop\\demo\\new-project\\src\\views\\UserProduct.vue"],"names":[],"mappings":";AAoEA,eAAe;AACb,EAAA,IADa,kBACN;AACL,WAAO;AACL,MAAA,OAAO,EAAE,EADJ;AAEL,MAAA,EAAE,EAAE,EAFC;AAGL,MAAA,GAAG,EAAE,CAHA;AAIL,MAAA,MAAM,EAAE;AACN;AACA,QAAA,WAAW,EAAE,EAFP,CAEW;;AAFX;AAJH,KAAP;AASD,GAXY;AAYb,EAAA,OAAO,EAAE;AACP,IAAA,UADO,wBACM;AAAA;;AACX,UAAM,GAAE,aAAO,OAAO,CAAC,GAAR,CAAY,WAAnB,iBAAqC,OAAO,CAAC,GAAR,CAAY,YAAjD,sBAAyE,KAAK,EAA9E,CAAR;AACA,WAAK,SAAL,GAAiB,IAAjB;AACA,WAAK,KAAL,CAAW,GAAX,CAAe,GAAf,EAAoB,IAApB,CAAyB,UAAC,QAAD,EAAc;AACrC,QAAA,OAAO,CAAC,GAAR,CAAY,QAAQ,CAAC,IAArB;AACA,QAAA,KAAI,CAAC,SAAL,GAAiB,KAAjB;;AACA,YAAI,QAAQ,CAAC,IAAT,CAAc,OAAlB,EAA2B;AACzB,UAAA,KAAI,CAAC,OAAL,GAAe,QAAQ,CAAC,IAAT,CAAc,OAA7B;AACF;AACD,OAND;AAOD,KAXM;AAYP,IAAA,SAZO,qBAYG,EAZH,EAYO,GAZP,EAYY;AAAA;;AACjB,MAAA,OAAO,CAAC,GAAR,CAAY,GAAZ;AACA,WAAK,MAAL,CAAY,WAAZ,GAA0B,EAA1B,CAFiB,CAEa;;AAC9B,UAAM,GAAE,aAAO,OAAO,CAAC,GAAR,CAAY,WAAnB,iBAAqC,OAAO,CAAC,GAAR,CAAY,YAAjD,UAAR;AACA,UAAM,IAAG,GAAI;AACX,QAAA,UAAU,EAAE,EADD;AAEX,QAAA,GAAG,EAAH;AAFW,OAAb;AAIA,WAAK,SAAL,GAAiB,IAAjB;AACA,WAAK,KAAL,CAAW,IAAX,CAAgB,GAAhB,EAAqB;AAAE,QAAA,IAAI,EAAE;AAAR,OAArB,EAAqC,IAArC,CAA0C,UAAC,QAAD,EAAc;AACtD,QAAA,MAAI,CAAC,MAAL,CAAY,WAAZ,GAA0B,EAA1B,CADsD,CACxB;;AAC9B,QAAA,MAAI,CAAC,SAAL,GAAiB,KAAjB;;AACA,QAAA,MAAI,CAAC,iBAAL,CAAuB,QAAvB,EAAiC,OAAjC;;AACA,QAAA,MAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,YAAlB;AACD,OALD;AAMD;AA3BM,GAZI;AAyCb,EAAA,OAzCa,qBAyCH;AACR,SAAK,EAAL,GAAU,KAAK,MAAL,CAAY,MAAZ,CAAmB,SAA7B;AACA,SAAK,UAAL;AACD;AA5CY,CAAf","sourcesContent":["<template>\r\n  <!-- 產品各別頁面 -->\r\n  <Loading :active=\"isLoading\"></Loading>\r\n  <div class=\"container\">\r\n    <nav aria-label=\"breadcrumb\">\r\n      <ol class=\"breadcrumb\">\r\n        <li class=\"breadcrumb-item\">\r\n          <router-link to=\"/user/cart\">購物車</router-link>\r\n        </li>\r\n        <li class=\"breadcrumb-item active\" aria-current=\"page\">\r\n          {{ product.title }}\r\n        </li>\r\n      </ol>\r\n    </nav>\r\n    <div class=\"row justify-content-center\">\r\n      <article class=\"col-8\">\r\n        <h2>{{ product.title }}</h2>\r\n        <div>{{ product.content }}</div>\r\n        <div>{{ product.description }}</div>\r\n        <img :src=\"product.imageUrl\" alt=\"\" class=\"img-fluid mb-3\" />\r\n      </article>\r\n      <div class=\"col-4\">\r\n        <div class=\"h5\" v-if=\"!product.price\">\r\n          {{ product.origin_price }} 元\r\n        </div>\r\n        <del class=\"h6\" v-if=\"product.price\"\r\n          >原價 {{ product.origin_price }} 元</del\r\n        >\r\n        <div class=\"h5\" v-if=\"product.price\">\r\n          現在只要 {{ product.price }} 元\r\n        </div>\r\n        <hr />\r\n        <div class=\"input-group mb-3\">\r\n          <!-- v-model 綁定方法：text、textarea、number 抓輸入值 -->\r\n          <!-- 此時qty會自動抓值 -->\r\n          <input\r\n            v-model=\"qty\"\r\n            min=1\r\n            number\r\n            type=\"number\"\r\n            class=\"form-control\"\r\n            placeholder=\"Username\"\r\n            aria-label=\"Username\"\r\n            aria-describedby=\"basic-addon1\"\r\n          />\r\n        </div>\r\n        <button\r\n          @click=\"addToCart(product.id, qty)\"\r\n          type=\"button\"\r\n          class=\"btn btn-outline-danger\"\r\n        >\r\n          <!-- BS樣式 -->\r\n          <!-- https://getbootstrap.com/docs/5.1/components/spinners/ -->\r\n          <div\r\n            v-if=\"this.status.loadingItem === product.id\"\r\n            class=\"spinner-grow spinner-grow-sm text-danger\"\r\n            role=\"status\"\r\n          >\r\n            <span class=\"visually-hidden\">Loading...</span>\r\n          </div>\r\n          加到購物車\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      product: {},\r\n      id: \"\",\r\n      qty: 1,\r\n      status: {\r\n        // 小小讀取效果 + 購物車按鈕暫時無法執行 倉庫\r\n        loadingItem: \"\", //對應品項id\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    getProduct() {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/product/${this.id}`;\r\n      this.isLoading = true;\r\n      this.$http.get(api).then((response) => {\r\n        console.log(response.data);\r\n        this.isLoading = false;\r\n        if (response.data.success) {\r\n          this.product = response.data.product;\r\n        }\r\n      });\r\n    },\r\n    addToCart(id, qty) {\r\n      console.log(qty);\r\n      this.status.loadingItem = id; // 按下按鈕送id，賦值給倉庫\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\r\n      const cart = {\r\n        product_id: id,\r\n        qty,\r\n      };\r\n      this.isLoading = true;\r\n      this.$http.post(url, { data: cart }).then((response) => {\r\n        this.status.loadingItem = \"\"; //資料庫更新成功後，空\r\n        this.isLoading = false;\r\n        this.$httpMessageState(response, \"加入購物車\");\r\n        this.$router.push(\"/user/cart\");\r\n      });\r\n    },\r\n  },\r\n  created() {\r\n    this.id = this.$route.params.productId;\r\n    this.getProduct();\r\n  },\r\n};\r\n</script>\r\n"],"sourceRoot":""}]}