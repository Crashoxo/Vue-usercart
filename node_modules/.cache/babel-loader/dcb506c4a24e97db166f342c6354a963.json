{"remainingRequest":"C:\\Users\\user\\Desktop\\demo\\Vue-usercart\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\user\\Desktop\\demo\\Vue-usercart\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\user\\Desktop\\demo\\Vue-usercart\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!C:\\Users\\user\\Desktop\\demo\\Vue-usercart\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\user\\Desktop\\demo\\Vue-usercart\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\user\\Desktop\\demo\\Vue-usercart\\src\\views\\Coupons.vue?vue&type=template&id=19de6ebc","dependencies":[{"path":"C:\\Users\\user\\Desktop\\demo\\Vue-usercart\\src\\views\\Coupons.vue","mtime":1637712482937},{"path":"C:\\Users\\user\\Desktop\\demo\\Vue-usercart\\babel.config.js","mtime":1636350343535},{"path":"C:\\Users\\user\\Desktop\\demo\\Vue-usercart\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\demo\\Vue-usercart\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\demo\\Vue-usercart\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\user\\Desktop\\demo\\Vue-usercart\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\demo\\Vue-usercart\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\demo\\Vue-usercart\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVzb2x2ZUNvbXBvbmVudCBhcyBfcmVzb2x2ZUNvbXBvbmVudCwgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCBjcmVhdGVFbGVtZW50Vk5vZGUgYXMgX2NyZWF0ZUVsZW1lbnRWTm9kZSwgcmVuZGVyTGlzdCBhcyBfcmVuZGVyTGlzdCwgRnJhZ21lbnQgYXMgX0ZyYWdtZW50LCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlRWxlbWVudEJsb2NrIGFzIF9jcmVhdGVFbGVtZW50QmxvY2ssIHRvRGlzcGxheVN0cmluZyBhcyBfdG9EaXNwbGF5U3RyaW5nLCBjcmVhdGVDb21tZW50Vk5vZGUgYXMgX2NyZWF0ZUNvbW1lbnRWTm9kZSB9IGZyb20gInZ1ZSI7CnZhciBfaG9pc3RlZF8xID0gewogIGNsYXNzOiAidGV4dC1lbmQgbXQtNCIKfTsKdmFyIF9ob2lzdGVkXzIgPSB7CiAgY2xhc3M6ICJ0YWJsZSBtdC00Igp9OwoKdmFyIF9ob2lzdGVkXzMgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZUVsZW1lbnRWTm9kZSgidGhlYWQiLCBudWxsLCBbLyojX19QVVJFX18qL19jcmVhdGVFbGVtZW50Vk5vZGUoInRyIiwgbnVsbCwgWy8qI19fUFVSRV9fKi9fY3JlYXRlRWxlbWVudFZOb2RlKCJ0aCIsIG51bGwsICLlkI3nqLEiKSwgLyojX19QVVJFX18qL19jcmVhdGVFbGVtZW50Vk5vZGUoInRoIiwgbnVsbCwgIuaKmOaJo+eZvuWIhuavlCIpLCAvKiNfX1BVUkVfXyovX2NyZWF0ZUVsZW1lbnRWTm9kZSgidGgiLCBudWxsLCAi5Yiw5pyf5pelIiksIC8qI19fUFVSRV9fKi9fY3JlYXRlRWxlbWVudFZOb2RlKCJ0aCIsIG51bGwsICLmmK/lkKbllZ/nlKgiKSwgLyojX19QVVJFX18qL19jcmVhdGVFbGVtZW50Vk5vZGUoInRoIiwgbnVsbCwgIue3qOi8ryIpXSldLCAtMSk7Cgp2YXIgX2hvaXN0ZWRfNCA9IHsKICBrZXk6IDAsCiAgY2xhc3M6ICJ0ZXh0LXN1Y2Nlc3MiCn07CnZhciBfaG9pc3RlZF81ID0gewogIGtleTogMSwKICBjbGFzczogInRleHQtbXV0ZWQiCn07CnZhciBfaG9pc3RlZF82ID0gewogIGNsYXNzOiAiYnRuLWdyb3VwIgp9Owp2YXIgX2hvaXN0ZWRfNyA9IFsib25DbGljayJdOwp2YXIgX2hvaXN0ZWRfOCA9IFsib25DbGljayJdOwpleHBvcnQgZnVuY3Rpb24gcmVuZGVyKF9jdHgsIF9jYWNoZSwgJHByb3BzLCAkc2V0dXAsICRkYXRhLCAkb3B0aW9ucykgewogIHZhciBfY29tcG9uZW50X0xvYWRpbmcgPSBfcmVzb2x2ZUNvbXBvbmVudCgiTG9hZGluZyIpOwoKICB2YXIgX2NvbXBvbmVudF9jb3Vwb25Nb2RhbCA9IF9yZXNvbHZlQ29tcG9uZW50KCJjb3Vwb25Nb2RhbCIpOwoKICB2YXIgX2NvbXBvbmVudF9EZWxNb2RhbCA9IF9yZXNvbHZlQ29tcG9uZW50KCJEZWxNb2RhbCIpOwoKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCBudWxsLCBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfTG9hZGluZywgewogICAgYWN0aXZlOiAkZGF0YS5pc0xvYWRpbmcKICB9LCBudWxsLCA4LCBbImFjdGl2ZSJdKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMSwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImJ1dHRvbiIsIHsKICAgIGNsYXNzOiAiYnRuIGJ0bi1wcmltYXJ5IiwKICAgIG9uQ2xpY2s6IF9jYWNoZVswXSB8fCAoX2NhY2hlWzBdID0gZnVuY3Rpb24gKCRldmVudCkgewogICAgICByZXR1cm4gJG9wdGlvbnMub3BlbkNvdXBvbk1vZGFsKHRydWUpOwogICAgfSkKICB9LCAiIOW7uueri+aWsOeahOWEquaDoOWIuCAiKV0pLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJ0YWJsZSIsIF9ob2lzdGVkXzIsIFtfaG9pc3RlZF8zLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJ0Ym9keSIsIG51bGwsIFsoX29wZW5CbG9jayh0cnVlKSwgX2NyZWF0ZUVsZW1lbnRCbG9jayhfRnJhZ21lbnQsIG51bGwsIF9yZW5kZXJMaXN0KCRkYXRhLmNvdXBvbnMsIGZ1bmN0aW9uIChpdGVtLCBrZXkpIHsKICAgIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soInRyIiwgewogICAgICBrZXk6IGtleQogICAgfSwgW19jcmVhdGVFbGVtZW50Vk5vZGUoInRkIiwgbnVsbCwgX3RvRGlzcGxheVN0cmluZyhpdGVtLnRpdGxlKSwgMSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoInRkIiwgbnVsbCwgX3RvRGlzcGxheVN0cmluZyhpdGVtLnBlcmNlbnQpICsgIiUiLCAxKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgidGQiLCBudWxsLCBfdG9EaXNwbGF5U3RyaW5nKF9jdHguJGZpbHRlcnMuZGF0ZShpdGVtLmR1ZV9kYXRlKSksIDEpLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJ0ZCIsIG51bGwsIFtpdGVtLmlzX2VuYWJsZWQgPT09IDEgPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJzcGFuIiwgX2hvaXN0ZWRfNCwgIuWVn+eUqCIpKSA6IChfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soInNwYW4iLCBfaG9pc3RlZF81LCAi5pyq6LW355SoIikpXSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoInRkIiwgbnVsbCwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzYsIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJidXR0b24iLCB7CiAgICAgIGNsYXNzOiAiYnRuIGJ0bi1vdXRsaW5lLWxpZ2h0IGJ0bi1zbSIsCiAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soJGV2ZW50KSB7CiAgICAgICAgcmV0dXJuICRvcHRpb25zLm9wZW5Db3Vwb25Nb2RhbChmYWxzZSwgaXRlbSk7CiAgICAgIH0KICAgIH0sICIgRWRpdCAiLCA4LCBfaG9pc3RlZF83KSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiYnV0dG9uIiwgewogICAgICBjbGFzczogImJ0biBidG4tb3V0bGluZS1kYW5nZXIgYnRuLXNtIiwKICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygkZXZlbnQpIHsKICAgICAgICByZXR1cm4gJG9wdGlvbnMub3BlbkRlbENvdXBvbk1vZGFsKGl0ZW0pOwogICAgICB9CiAgICB9LCAiIERlbGV0ZSAiLCA4LCBfaG9pc3RlZF84KV0pXSldKTsKICB9KSwgMTI4KSldKV0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9jb3Vwb25Nb2RhbCwgewogICAgY291cG9uOiAkZGF0YS50ZW1wQ291cG9uLAogICAgcmVmOiAiY291cG9uTW9kYWwiLAogICAgb25VcGRhdGVDb3Vwb246ICRvcHRpb25zLnVwZGF0ZUNvdXBvbgogIH0sIG51bGwsIDgsIFsiY291cG9uIiwgIm9uVXBkYXRlQ291cG9uIl0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9EZWxNb2RhbCwgewogICAgaXRlbTogJGRhdGEudGVtcENvdXBvbiwKICAgIHJlZjogImRlbE1vZGFsIiwKICAgIG9uRGVsSXRlbTogJG9wdGlvbnMuZGVsQ291cG9uCiAgfSwgbnVsbCwgOCwgWyJpdGVtIiwgIm9uRGVsSXRlbSJdKV0pOwp9"},{"version":3,"sources":["C:\\Users\\user\\Desktop\\demo\\Vue-usercart\\src\\views\\Coupons.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <!-- main.js 全域匯入 使用 -->\r\n    <Loading :active=\"isLoading\"></Loading>\r\n    <div class=\"text-end mt-4\">\r\n      <button class=\"btn btn-primary\" @click=\"openCouponModal(true)\">\r\n        建立新的優惠券\r\n      </button>\r\n    </div>\r\n    <table class=\"table mt-4\">\r\n      <thead>\r\n        <tr>\r\n          <th>名稱</th>\r\n          <th>折扣百分比</th>\r\n          <th>到期日</th>\r\n          <th>是否啟用</th>\r\n          <th>編輯</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"(item, key) in coupons\" :key=\"key\">\r\n          <td>{{ item.title }}</td>\r\n          <td>{{ item.percent }}%</td>\r\n          <!-- main.js $filters全域方法 -->\r\n          <td>{{ $filters.date(item.due_date) }}</td>\r\n          <td>\r\n            <span v-if=\"item.is_enabled === 1\" class=\"text-success\">啟用</span>\r\n            <span v-else class=\"text-muted\">未起用</span>\r\n          </td>\r\n          <td>\r\n            <div class=\"btn-group\">\r\n              <button\r\n                class=\"btn btn-outline-light btn-sm\"\r\n                @click=\"openCouponModal(false, item)\"\r\n              >\r\n                Edit\r\n              </button>\r\n              <button\r\n                class=\"btn btn-outline-danger btn-sm\"\r\n                @click=\"openDelCouponModal(item)\"\r\n              >\r\n                Delete\r\n              </button>\r\n            </div>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <!-- :coupon props -->\r\n    <!-- @update-coupon emit -->\r\n    <couponModal\r\n      :coupon=\"tempCoupon\"\r\n      ref=\"couponModal\"\r\n      @update-coupon=\"updateCoupon\"\r\n    />\r\n    <DelModal :item=\"tempCoupon\" ref=\"delModal\" @del-item=\"delCoupon\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CouponModal from \"@/components/CouponModal.vue\";\r\nimport DelModal from \"@/components/DelModal.vue\";\r\nexport default {\r\n  components: { CouponModal, DelModal },\r\n  props: {\r\n    config: Object,\r\n  },\r\n  data() {\r\n    return {\r\n      coupons: {},\r\n      tempCoupon: {\r\n        title: \"\",\r\n        is_enabled: 0,\r\n        percent: 100,\r\n        code: \"\",\r\n      },\r\n      isLoading: false,\r\n      isNew: false,\r\n    };\r\n  },\r\n  methods: {\r\n    openCouponModal(isNew, item) {\r\n      this.isNew = isNew;\r\n      if (this.isNew) {\r\n        this.tempCoupon = {\r\n          // 增加 due_date 屬性\r\n          due_date: new Date().getTime() / 1000,\r\n        };\r\n      } else {\r\n        this.tempCoupon = { ...item };\r\n      }\r\n      //   ref=\"couponModal\" 彈窗\r\n      this.$refs.couponModal.showModal();\r\n    },\r\n    openDelCouponModal(item) {\r\n      this.tempCoupon = { ...item };\r\n      const delComponent = this.$refs.delModal;\r\n      delComponent.showModal();\r\n    },\r\n    getCoupons() {\r\n      this.isLoading = true;\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupons`;\r\n      this.$http.get(url, this.tempProduct).then((response) => {\r\n        this.coupons = response.data.coupons;\r\n        this.isLoading = false;\r\n        console.log(response);\r\n      });\r\n    },\r\n    updateCoupon(tempCoupon) {\r\n      if (this.isNew) {\r\n        // 新增\r\n        const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon`;\r\n        this.$http.post(url, { data: tempCoupon }).then((response) => {\r\n          console.log(response, tempCoupon);\r\n          this.$httpMessageState(response, \"新增優惠券\");\r\n          this.getCoupons();\r\n          this.$refs.couponModal.hideModal();\r\n        });\r\n      } else {\r\n        //   編輯\r\n        const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon/${this.tempCoupon.id}`;\r\n        this.$http.put(url, { data: this.tempCoupon }).then((response) => {\r\n          console.log(response);\r\n          this.$httpMessageState(response, \"新增優惠券\");\r\n          this.getCoupons();\r\n          this.$refs.couponModal.hideModal();\r\n        });\r\n      }\r\n    },\r\n    delCoupon() {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon/${this.tempCoupon.id}`;\r\n      this.isLoading = true;\r\n      this.$http.delete(url).then((response) => {\r\n        console.log(response, this.tempCoupon);\r\n        this.$httpMessageState(response, \"刪除優惠券\");\r\n        const delComponent = this.$refs.delModal;\r\n        delComponent.hideModal();\r\n        this.getCoupons();\r\n      });\r\n    },\r\n  },\r\n  created() {\r\n    this.getCoupons();\r\n  },\r\n};\r\n</script>\r\n"],"sourceRoot":""}]}